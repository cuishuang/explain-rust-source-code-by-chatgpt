# File: rayon/src/iter/flatten.rs

rayon/src/iter/flatten.rs这个文件是Rayon库中的一个模块，定义了几个关键的类型用于处理Flatten操作。

Flatten操作是将嵌套的迭代器展平为一个迭代器的操作。例如，一个包含多个容器的迭代器，其中每个容器又包含多个元素，通过Flatten操作可以将所有容器中的元素展平为一个迭代器。

在这个文件中，有几个重要的结构体定义：

1. `Flatten<I>`：这是一个包装器类型，用于将一个包含嵌套迭代器的迭代器展开为一个单层迭代器。它实现了`Iterator` trait，可以调用`next()`方法依次返回迭代器中的元素。这个结构体是通过实现`FlattenIterator` trait来实现的。

2. `FlattenConsumer<C>`：这是用于展平操作的消费者类型。它实现了`FlattenConsumer` trait，其中定义了方法来处理每个嵌套迭代器的元素。在展平操作中，每个嵌套迭代器的元素都会被传递给这个消费者进行处理。

3. `FlattenFolder<C>`：这是用于展平操作的文件夹类型。它实现了`FlattenFolder` trait，其中定义了用于展平操作的折叠方法。在展平操作中，每个嵌套迭代器都会调用这个文件夹的折叠方法。折叠方法通过将每个嵌套迭代器的元素添加到结果中，实现了展平操作。

通过这几个关键的结构体，Rayon库实现了对展平操作的支持。当我们使用Rayon的`par_flatten()`方法时，实际上就是通过使用这些结构体来实现的。这些结构体的定义和实现使得展平操作可以高效地并行处理。

