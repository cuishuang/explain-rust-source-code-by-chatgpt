# File: rayon/rayon-demo/src/tsp/bench.rs

rayon-demo/src/tsp/bench.rs 这个文件是 Rust rayon 库中的一个示例，用于展示如何使用 rayon 库来解决旅行销售员问题（Traveling Salesman Problem）。

旅行销售员问题是一个经典的组合优化问题，目标是找到一条最短路径，使得旅行销售员能够依次访问多个城市并回到原始起点。该问题的特点是，随着城市数量的增加，寻找最优路径的计算量呈指数级增长，因此需要使用高效的并行算法进行解决。

bench.rs 文件的主要作用是对比并行和串行两种方法的性能差异。它首先定义了一个结构体 `Bench`，其中包含了问题的规模大小（城市数量）和一个路径的向量。然后，它实现了 `Bench` 结构体的 `new` 方法，用于创建问题实例，并调用 `sequential` 和 `parallel` 两个方法分别运行串行和并行算法。

在 `sequential` 方法中，程序通过穷举法遍历所有可能的路径，并计算出最短路径。它使用了基于回溯的递归算法，顺序地生成所有可能的路径，并保留最短路径。该方法不使用 rayon 库，并且在处理大规模问题时可能会非常耗时。

在 `parallel` 方法中，程序使用 rayon 库来并行计算最短路径。它使用了 rayon 提供的 `par_iter` 方法，该方法可以将迭代器并行化并应用于多个线程。该方法首先将所有可能的路径组合成一个迭代器，然后使用 `par_iter` 并行地遍历迭代器，并使用 `take_while` 方法设置停止条件，以便在找到最短路径后停止计算。在处理大规模问题时，该方法相比于串行算法具有更高的计算速度。

bench.rs 文件最后定义了一个 `main` 函数，用于初始化问题实例并调用 `sequential` 和 `parallel` 方法进行性能对比。程序运行后会输出两种算法的执行时间并进行比较，以便对性能差异有一个直观的了解。

通过 bench.rs 文件，开发者可以学习如何使用 rayon 库来解决并行化的组合优化问题，并对比并行算法和串行算法的性能差异，以便选择适合自己需求的方法。

