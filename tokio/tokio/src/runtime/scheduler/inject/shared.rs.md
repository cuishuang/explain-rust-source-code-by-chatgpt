# File: tokio/tokio/src/runtime/scheduler/inject/shared.rs

在tokio源代码中的`tokio/tokio/src/runtime/scheduler/inject/shared.rs`文件定义了一些与共享资源相关的结构体和方法。这些结构体和方法用于在tokio运行时中跨线程共享状态。

该文件包含以下结构体和枚举类型：

1. `Shared<T>`：这是一个泛型结构体，用于在不同的线程间共享持久化数据。它包含一个内部可变的数据引用，允许在不同的线程上读取和写入数据。

2. `Inject<T>`：这是一个泛型枚举类型，用于在不同的线程中将数据注入到共享资源中。它包含一个`Set`成员变量和一个`Get`成员变量。`Set`成员变量用于将数据注入到共享资源中，`Get`成员变量用于获取共享资源中的数据。

3. `Set<T>`：这是一个泛型结构体，用于将数据注入到共享资源中。它包含一个`Shared<T>`成员变量和一个`T`成员变量。在调用`Set::set`方法时，会将`T`类型的数据存储到`Shared<T>`结构体的内部引用中。

4. `Get<T>`：这是一个泛型结构体，用于从共享资源中获取数据。它包含一个`Shared<T>`成员变量。在调用`Get::get`方法时，会从`Shared<T>`结构体的内部引用中获取数据，并返回该数据。

这些结构体和枚举类型的作用是在tokio运行时的不同线程之间共享持久化数据。通过使用`Shared<T>`结构体，可以实现线程安全的数据访问和修改。`Inject<T>`枚举类型用于将数据注入到共享资源中和从共享资源中获取数据。`Set<T>`结构体用于将数据注入到`Shared<T>`结构体中，`Get<T>`结构体用于从`Shared<T>`结构体中获取数据。

通过使用这些结构体和枚举类型，tokio运行时可以实现多个线程之间的数据共享和同步，从而提高并发性能和可扩展性。

