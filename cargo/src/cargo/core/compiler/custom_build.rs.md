# File: cargo/src/cargo/core/compiler/custom_build.rs

cargo/src/cargo/core/compiler/custom_build.rs 文件在Rust Cargo中的作用是处理自定义构建（custom build）的逻辑。在 Rust 项目中，有时需要在构建过程中执行一些自定义的脚本或操作，而不是仅仅编译源代码。这个文件中的结构体和枚举类型提供了处理自定义构建过程的相关功能。

接下来逐一介绍这些结构体和枚举类型：

1. `BuildOutput`：表示一个自定义构建的输出。它包含一个输出文件的路径和一个输出图标识符，用于唯一标识输出。

2. `BuildScriptOutputs`：是一个HashMap结构，用于保存自定义构建脚本的输出。它以输出图标识符作为键，对应的值是一个BuildOutput结构体。

3. `BuildScripts`：这是一个结构体，用于表示所有的自定义构建脚本。它包含了两个字段：`prebuilds` 和 `postbuilds`，分别表示前置和后置脚本。每个脚本都包含了脚本的路径和一些其他的配置信息。

4. `BuildDeps`：这是一个包含了构建依赖项的结构体。它保存了所有需要进行自定义构建的 crate 的信息，包括源代码的路径、构建输出和其他编译相关的配置。

5. `LinkArgTarget`：这是一个枚举类型，用于表示链接参数的目标。它包括了以下几个值：
   - `Any`：表示适用于所有目标平台的链接参数。
   - `All`：表示适用于所有平台间的链接参数。
   - `None`：表示不适用于任何目标的链接参数。
   - `Target(T)`：表示适用于特定目标的链接参数，其中 T 是一个字符串，表示目标平台的名称。

这些结构体和枚举类型在 custom_build.rs 文件中被用来表示自定义构建的相关信息，包括构建脚本的输出、构建脚本的配置和需要进行自定义构建的 crate 的信息等。通过使用这些结构体和枚举类型，Cargo 能够管理和执行自定义构建的逻辑，并将其整合到整个编译过程中。

